---
layout: docs
page_title: Important changes
description: >-
  Deprecations, important or breaking changes, and remediation recommendations
  for upgrading Vault.

valid_change_types: >-
  - Change in support
  - New behavior (new defaults, new requirements, etc.)
  - Breaking change --> workaround/recommendation recommended
  - Known issue --> workaround/recommendation required
---

# Important changes

**Last updated**: 2025-10-04

Always review important or breaking changes and remediation recommendations
before upgrading Vault.

## Breaking changes

### Audiences required for Kubernetes authentication roles ((##k8-audience-required))

| Change       | Affected version | Vault edition
| ------------ | ---------------- | -------------
| Breaking     | 1.21.0           | All

All tokens for Kubernetes authentication roles must provide explicit audience
details. Vault validates the audience claim in the JWT token to ensure that the
token is actually intended for Vault and not another service.

If you do not provide an audience, authentication fails.

#### Recommendation

Update your Kubernetes authentication roles to include the audience parameter.
For example:

```shell-session
vault write auth/kubernetes/role/demo \
    bound_service_account_names=myapp \
    bound_service_account_namespaces=default \
    policies=default \
    ttl=1h
```

Refer to the [Kubernetes authentication docs](/vault/docs/auth/kubernetes) for
more information.

### Item-by-item list comparison for allowed_parameters and denied_parameters ((#allowed-parameters-list))

| Change       | Affected version | Vault edition
| ------------ | ---------------- | -------------
| Breaking     | 1.21.0           | All

Prior to Vault 1.21, when a parameter in a request was subject to
`allowed_parameters` or `denied_parameters` checks and the parameter's value was
a list, Vault evaluated the **entire list** as a single value.
This meant Vault would only find a match if the **whole list** exactly matched
an entry in `allowed_parameters` or `denied_parameters`, which was often
unintuitive.

Starting with Vault 1.21, this behavior has changed.
When a parameter's value is a list, **each element** in that list is now checked
individually against the allowed or denied values.

#### Recommendation

If you start seeing workflows fail due to permission checks involving
`denied_parameters`, it likely means that the workflow was previously relying on
the old matching behavior, where a list containing a denied value would still
pass validation as long as the entire list didn't exactly match a denied entry.

In that case, review your policy and workflow:
* **Check your policies** to ensure they arenâ€™t overly restrictive.
* **Update workflows** to avoid including explicitly denied values in lists.

If necessary, Vault 1.21 can temporarily revert to the legacy (1.20) behavior by
setting the `VAULT_LEGACY_EXACT_MATCHING_ON_LIST` environment variable.
However, note that this option is **deprecated** and will be removed in a future
release.

## New behavior

None.


## Known issues

### Missed events with multiple event clients ((#missed-events)) <EnterpriseAlert inline="true" />

| Change      | Affected version | Fixed version
| ----------- | ---------------- | -------------
| Known issue | 1.21.0+ent       | None

Users may miss events when multiple clients subscribe to the same performance
standby node in a cluster with the same namespace and event type filters because
one client disconnecting effectively unsubscribes the remaining clients who no
longer receive events.

#### Recommendation

If you have multiple event subscribers with the same namespace and event type
filters you have two options:

1. Spread them out among the nodes of the Vault cluster.
1. Only subscribe to events on the active node of the cluster.


